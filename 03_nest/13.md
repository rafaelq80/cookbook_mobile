<h1>Projeto 02 - Todo-List - Relacionamento entre Classes - Recurso Categoria - Parte 02</h1>

O que veremos por aqui:

1. Criar a Classe CategoriaService
2. Atualizar a Classe Tarefa Service
3. Criar a Classe CategoriaController
4. Registrar as Classes CategoriaService e CategoriaController na Classe Mﾃｳdulo CategoriaModule
5. Testar todos os Mﾃｩtodos no Insomnia

<h2>1. O Mﾃｳdulo Categoria</h2>

Na etapa anterior, comeﾃｧamos a construir o Mﾃｳdulo Categoria e criamos o Relacionamento entre as Classes Categoria e Tarefa. Veja o Diagrama de Classes abaixo: 

<div align="center"><img src="https://i.imgur.com/GX2ksJk.png" title="source: imgur.com" /></div>

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="150px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Atenﾃｧﾃ｣o aos Detalhes ao criar o Mﾃｳdulo Categoria. Todas as Classes construﾃｭdas no Mﾃｳdulo Tarefa deverﾃ｣o ser construﾃｭdas no Mﾃｳdulo Categoria com as adaptaﾃｧﾃｵes pertinentes ao Mﾃｳdulo Categoria.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

| <img src="https://i.imgur.com/RfjtOFi.png" title="source: imgur.com" width="150px"/> | <div align="left"> **DICA:** *Caso vocﾃｪ tenha alguma dﾃｺvida sobre como criar as Classes CategoriaService e CategoriaController, executar o projeto, entre outras, consulte a Documentaﾃｧﾃ｣o do Mﾃｳdulo Tarefa.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<h2>促 Passo 01 - Criar a Classe CategoriaService</h2>

Vamos criar a pasta **services**, dentro do nosso **Mﾃｳdulo Categoria** (pasta categoria):

1. Na pasta **categoria**, clique com o botﾃ｣o direito do mouse e clique na opﾃｧﾃ｣o **New Folder** (Nova Pasta). 

2. O nome da pasta serﾃ｡ **services**, como mostra a figura abaixo. Apﾃｳs digitar o nome da pasta, pressione a tecla **enter** do seu teclado para concluir. 
2. A estrutura de pasta do Mﾃｳdulo Categoria, ficarﾃ｡ igual a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/aWzFr3Q.png" title="source: imgur.com" /></div>

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="100px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Atenﾃｧﾃ｣o aos Detalhes ao criar a pasta services. Um erro muito comum ﾃｩ criar a pasta services fora da pasta da pasta categoria.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

Na sequﾃｪncia, vamos criar a Classe de Serviﾃｧo **CategoriaService** que chamaremos de **categoria.service.ts**

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="220px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Atenﾃｧﾃ｣o aos Detalhes ao criar Classe de Serviﾃｧo. Um erro muito comum ﾃｩ digitar o nome da Classe de forma incorreta. O nome da Classe deve estar dentro dos padrﾃｵes do Nest (nome_do_modulo.tipo_da_classe.ts) para evitar erros na sua aplicaﾃｧﾃ｣o.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

1. Clique com o botﾃ｣o direito do mouse sobre a **pasta services**, que foi criada dentro da pasta **categoria**, como mostra a figura abaixo, e na sequﾃｪncia clique na opﾃｧﾃ｣o **New File** (Novo Arquivo).

2. O nome do arquivo serﾃ｡ **categoria.service.ts**, como mostra a figura abaixo. Apﾃｳs digitar o nome do arquivo, pressione a tecla **enter** do seu teclado para concluir. 

<div align="center"><img src="https://i.imgur.com/isYgAXA.png" title="source: imgur.com" /></div>

Veja abaixo a implementaﾃｧﾃ｣o da Classe **CategoriaService**:

```typescript
import { HttpException, HttpStatus, Injectable } from "@nestjs/common";
import { InjectRepository } from "@nestjs/typeorm";
import { DeleteResult, ILike, Repository } from "typeorm";
import { Categoria } from "../entities/categoria.entity";

@Injectable()
export class CategoriaService {

    constructor(
        @InjectRepository(Categoria)
        private categoriaRepository: Repository<Categoria>
    ) { }

    async findAll(): Promise<Categoria[]> {
        return await this.categoriaRepository.find({
            relations: {
                tarefas: true
            }
        });
    }

    async findById(id: number): Promise<Categoria> {
        let categoria = await this.categoriaRepository.findOne({
            where: {
                id
            },
            relations: {
                tarefas: true
            }
        });

        if (!categoria)
            throw new HttpException('Categoria nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return categoria;
    }

    async findByDescricao(descricao: string): Promise<Categoria[]> {
        return await this.categoriaRepository.find({
            where: {
                descricao: ILike(`%${descricao}%`),
            },
            relations: {
                tarefas: true
            }
        })
    }

    async create(categoria: Categoria): Promise<Categoria> {
        return await this.categoriaRepository.save(categoria);
    }

    async update(categoria: Categoria): Promise<Categoria> {
        let buscaCategoria = await this.findById(categoria.id);

        if (!buscaCategoria || !categoria.id)
            throw new HttpException('Categoria nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return await this.categoriaRepository.save(categoria);
    }

    async delete(id: number): Promise<DeleteResult> {
        
        let buscaCategoria = await this.findById(id);

        if (!buscaCategoria)
            throw new HttpException('Categoria nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return await this.categoriaRepository.delete(id);

    }
}
```

Observe que nos Mﾃｩtodos **findAll(), findById(id: number) e findByDescricao(descricao: string)** foram acrescentadas as linhas abaixo:

<div align="center"><img src="https://i.imgur.com/h7e0unp.png" title="source: imgur.com" /></div>

Estas linhas tem por objetivo exibir os Objetos da Classe Tarefa que estﾃ｣o relacionados com os Objetos da Classe Categoria, ou seja, ao executar os Mﾃｩtodos **findAll(), findById(id: number) e findByDescricao(descricao: string)**, alﾃｩm de exibir os Objetos da Classe Categoria persistidos no Banco de dados, serﾃ｡ exibida tambﾃｩm a lista de Objetos da Classe Tarefa associadas a cada Objeto da Classe da Categoria, semelhante ao exemplo abaixo:

```json
{
        "id": 1,
        "descricao": "Categoria 01",
        "tarefa": [
            {
                "id": 4,
                  "nome": "Quarta tarefa",
                  "descricao": "Minha quarta tarefa do dia",
                  "responsavel": "Responsﾃ｡vel 04",
                  "data": "2022-07-15",
                  "status": true
            },
             {
                "id": 5,
                  "nome": "Quinta tarefa",
                  "descricao": "Minha quinta tarefa do dia",
                  "responsavel": "Responsﾃ｡vel 05",
                  "data": "2022-07-25",
                  "status": true
            }
        ]
    }
```

Observe que logo apﾃｳs o Categoria 01, foi criado um array contendo as duas tarefas associadas.

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="150px"/> | <div align="left"> **ATENﾃﾃグ:** *Se o comando Relations nﾃ｣o for adicionada nos 3 Mﾃｩtodos de consulta, ao testar os 3 Mﾃｩtodos GET no Insomnia o Relacionamento entre as Classes nﾃ｣o serﾃ｡ exibido.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<div align="left"><img src="https://i.imgur.com/O6PILGE.png" title="source: imgur.com" width="25px"/> <a href="https://docs.nestjs.com/techniques/database#relations" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>Relacionamento entre Classes</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/OtnA0bd.png" title="source: imgur.com" width="25px"/> <a href="https://typeorm.io/relations" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>TypeORM - Relacionamentos</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/OtnA0bd.png" title="source: imgur.com" width="25px"/> <a href="https://typeorm.io/many-to-one-one-to-many-relations" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>TypeORM - Relacionamentos One to Many e Many to One</i></b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/backend_todolist_nest/blob/10_CRUD_Recurso_Categoria/todolist/src/categoria/services/categoria.service.ts" target="_blank"><b>Cﾃｳdigo fonte da Classe CategoriaService</b></a></div>

<br />

<h2>促 Passo 02 - Atualizar a Classe TarefaService</h2>

Da mesma forma que adicionamos o comando Relations na Classe CategoriaService, tambﾃｩm iremos adicionar na Classe TarefaService, nos Mﾃｩtodos **findAll(), findById(id: number) e findByTitulo(titulo: string)**, como mostra imagem abaixo:

<div align="center"><img src=https://i.imgur.com/eQXTPvh.png" title="source: imgur.com" /></div>

Desta forma, ao executar os Mﾃｩtodos  **findAll(), findById(id: number) e findByTitulo(titulo: string)**, os Objetos da Classe Tarefa passarﾃ｣o a exibir o Objeto da Classe Categoria associado, semelhante ao exemplo abaixo:

```json
{
    "id": 4,
    "nome": "Quarta tarefa",
    "descricao": "Minha quarta tarefa do dia",
    "responsavel": "Responsﾃ｡vel 04",
    "data": "2022-07-15",
    "status": true,
    "categoria": {
        "id": 1,
        "descricao": "Categoria 01"
    }
}
```

Veja abaixo a implementaﾃｧﾃ｣o atualizada da Classe **TarefaService**:

```typescript
import { HttpException, HttpStatus, Injectable } from "@nestjs/common";
import { InjectRepository } from "@nestjs/typeorm";
import { DeleteResult, ILike, Repository } from "typeorm";
import { Tarefa } from "../entities/tarefa.entity";

@Injectable()
export class TarefaService {

    constructor(
        @InjectRepository(Tarefa)
        private tarefaRepository: Repository<Tarefa>
    ) { }

    async findAll(): Promise<Tarefa[]> {
        return await this.tarefaRepository.find({
            relations: {
                categoria: true
            }
        });
    }

    async findById(id: number): Promise<Tarefa> {
        let tarefa = await this.tarefaRepository.findOne({
            where: {
                id
            },
            relations: {
                categoria: true
            }
        });

        if (!tarefa)
            throw new HttpException('Tarefa nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return tarefa;
    }

    async findByNome(nome: string): Promise<Tarefa[]> {
        return await this.tarefaRepository.find({
            where: {
                nome: ILike(`%${nome}%`),
            },
            relations: {
                categoria: true
            }
        })
    }

    async create(tarefa: Tarefa): Promise<Tarefa> {
        return await this.tarefaRepository.save(tarefa);
    }

    async update(tarefa: Tarefa): Promise<Tarefa> {
        let buscaTarefa = await this.findById(tarefa.id);

        if (!buscaTarefa || !tarefa.id)
            throw new HttpException('Tarefa nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return await this.tarefaRepository.save(tarefa);
    }

    async delete(id: number): Promise<DeleteResult> {
        
        let buscaTarefa = await this.findById(id);

        if (!buscaTarefa)
            throw new HttpException('Tarefa nﾃ｣o encontrada!', HttpStatus.NOT_FOUND);

        return await this.tarefaRepository.delete(id);
    }
    
}
```

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/backend_todolist_nest/blob/10_CRUD_Recurso_Categoria/todolist/src/tarefa/services/tarefa.service.ts" target="_blank"><b>Cﾃｳdigo fonte da Classe TarefaService</b></a></div>

<br />

<h2>促 Passo 03 - Criar a Classe CategoriaController</h2>

Vamos criar a pasta **controllers**, dentro do nosso **Mﾃｳdulo Categoria** (pasta categoria):

1. Na pasta **categoria**, clique com o botﾃ｣o direito do mouse e clique na opﾃｧﾃ｣o **New Folder** (Nova Pasta). 

2. O nome da pasta serﾃ｡ **controllers**. Apﾃｳs digitar o nome da pasta, pressione a tecla **enter** do seu teclado para concluir. 
2. A estrutura de pasta do Mﾃｳdulo Categoria, ficarﾃ｡ igual a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/QwtkbGa.png" title="source: imgur.com" /></div>

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="150px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Atenﾃｧﾃ｣o aos Detalhes ao criar a pasta controllers. Um erro muito comum ﾃｩ criar a pasta controllers fora da pasta categoria.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

Na sequﾃｪncia, vamos criar a Classe Controladora **CategoriaController** que chamaremos de **categoria.controller.ts**.

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="320px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Atenﾃｧﾃ｣o aos Detalhes ao criar Classe de Serviﾃｧo. Um erro muito comum ﾃｩ digitar o nome da Classe de forma incorreta. O nome da Classe deve estar dentro dos padrﾃｵes do Nest (nome_do_modulo.tipo_da_classe.ts) para evitar erros na sua aplicaﾃｧﾃ｣o.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

1. Clique com o botﾃ｣o direito do mouse sobre a **pasta controllers**, que foi criada dentro da pasta **categoria**, como mostra a figura abaixo, e clique na opﾃｧﾃ｣o **New File** (Novo Arquivo).

2. O nome do arquivo serﾃ｡ **categoria.controller.ts**, como mostra a figura abaixo. Apﾃｳs digitar o nome do arquivo, pressione a tecla **enter** do seu teclado para concluir. 

<div align="center"><img src="https://i.imgur.com/1ig2csA.png" title="source: imgur.com" /></div>

Veja abaixo a implementaﾃｧﾃ｣o da Classe **CategoriaController**:

```typescript
import { Body, Controller, Delete, Get, HttpCode, HttpStatus, Param, ParseIntPipe, Post, Put } from "@nestjs/common";
import { Categoria } from "../entities/categoria.entity";
import { CategoriaService } from "../services/categoria.service";

@Controller("/categorias")
export class CategoriaController {
  constructor(private readonly categoriaService: CategoriaService) { }

  @Get()
  @HttpCode(HttpStatus.OK)
  findAll(): Promise<Categoria[]> {
    return this.categoriaService.findAll();
  }

  @Get('/:id')
  @HttpCode(HttpStatus.OK)
  findById(@Param('id', ParseIntPipe) id: number): Promise<Categoria> {
    return this.categoriaService.findById(id);
  }

  @Get('/descricao/:descricao')
  @HttpCode(HttpStatus.OK)
  findByTitulo(@Param('descricao') descricao: string): Promise<Categoria[]> {
    return this.categoriaService.findByDescricao(descricao);
  }

  @Post()
  @HttpCode(HttpStatus.CREATED)
  create(@Body() categoria: Categoria): Promise<Categoria> {
    return this.categoriaService.create(categoria);
  }

  @Put()
  @HttpCode(HttpStatus.OK)
  update(@Body() categoria: Categoria): Promise<Categoria> {
    return this.categoriaService.update(categoria);
  }

  @Delete('/:id')
  @HttpCode(HttpStatus.NO_CONTENT)
  delete(@Param('id', ParseIntPipe) id: number) {
    return this.categoriaService.delete(id);
  }
}
```
Observe que a implementaﾃｧﾃ｣o ﾃｩ semelhante a Classe **TarefaController**.

<div align="left"><img src="https://i.imgur.com/cDPH4tl.png" title="source: imgur.com" width="30px"/> <a href=" https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Methods" target="_blank"><b>Documentaﾃｧﾃ｣o: HTTP Request Methods</b></a></div>

<div align="left"><img src="https://i.imgur.com/cDPH4tl.png" title="source: imgur.com" width="30px"/> <a href=" https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Status" target="_blank"><b>Documentaﾃｧﾃ｣o: HTTP Status Code</b></a></div>

<div align="left"><img src="https://i.imgur.com/O6PILGE.png" title="source: imgur.com" width="25px"/> <a href="https://docs.nestjs.com/controllers" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>Classe Controladora</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/O6PILGE.png" title="source: imgur.com" width="25px"/> <a href="https://docs.nestjs.com/providers" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>Provedores - Classe Controladora</i></b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/backend_todolist_nest/blob/10_CRUD_Recurso_Categoria/todolist/src/categoria/controllers/categoria.controller.ts" target="_blank"><b>Cﾃｳdigo fonte da Classe CategoriaController</b></a></div>

<br />

<h2>促 Passo 04 - Registrar as Classes CategoriaService e CategoriaController na Classe CategoriaModule</h2>

Na sequﾃｪncia, vamos registrar as nossas Classes **CategoriaService** e **CategoriaController**, no Mﾃｳdulo **CategoriaModule**. Esse passo ﾃｩ fundamental para o correto funcionamento da nossa aplicaﾃｧﾃ｣o.

1. Abra a Classe **CategoriaModule**, localizada na pasta **categoria**, conforme indicada na imagem abaixo:

   <div align="center"><img src="https://i.imgur.com/Ps8B2Oy.png" title="source: imgur.com" /></div>

2. Implemente as alteraﾃｧﾃｵes, indicadas pelas setas na imagem abaixo:

 <div align="left"><img src="https://i.imgur.com/smZGSs2.png" title="source: imgur.com" /></div>

Vamos analisar as alteraﾃｧﾃｵes no cﾃｳdigo:

**Linha 3:** Importamos a Classe **CategoriaController**, criada anteriormente. 

**Linha 5:** Importamos a Classe **CategoriaService**, criada anteriormente. 

**Linha 9:** No array **providers** vamos adicionar a **Classe CategoriaService** do **Mﾃｳdulo Categoria**. Desta forma a Classe de Serviﾃｧo poderﾃ｡ ser injetada em outras Classes dentro do Mﾃｳdulo Categoria.

**Linha 10:** No array **controllers** vamos adicionar a **Classe CategoriaController** do **Mﾃｳdulo Categoria**. Desta forma os endpoints da Classe Controladora estrﾃ｣o disponﾃｭveis para receber Requisiﾃｧﾃｵes HTTP.

<div align="left"><img src="https://i.imgur.com/O6PILGE.png" title="source: imgur.com" width="25px"/> <a href="https://docs.nestjs.com/modules" target="_blank"><b>Documentaﾃｧﾃ｣o: <i>Mﾃｳdulos no Nest</i></b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/backend_todolist_nest/blob/10_CRUD_Recurso_Categoria/todolist/src/categoria/categoria.module.ts" target="_blank"><b>Cﾃｳdigo fonte da Classe CategoriaModule</b></a></div>

<br />

<h2>促 Passo 03 - Executar o projeto</h2>

1. Verifique se vocﾃｪ estﾃ｡ dentro da pasta do projeto, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/kXggbYz.png" title="source: imgur.com" /></div>

2. Digite o comando ***npm run start:dev***, para compilar e executar o nosso projeto **todolist**, caso nﾃ｣o esteja em execuﾃｧﾃ｣o. 

```bash
npm run start:dev
```

3. Se tudo deu certo, o resultado serﾃ｡ semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/8nd98X4.png" title="source: imgur.com" /></div>

4.Observe que todos os endpoints do **Mﾃｳdulo Categoria** foram disponibilizados no endereﾃｧo **/categorias** 

<br />

<h2>促 Passo 06 - Testar o Mﾃｳdulo Categoria no Insomnia</h2>

Vamos criar no Insomnia todas as requisiﾃｧﾃｵes necessﾃ｡rias para testar os 6 Mﾃｩtodos do Mﾃｳdulo Categoria. Veja abaixo como ficam as requisiﾃｧﾃｵes:

| <img src="https://i.imgur.com/RfjtOFi.png" title="source: imgur.com" width="120px"/> | <div align="left"> **DICA:** *Caso vocﾃｪ tenha alguma dﾃｺvida sobre como criar as Requisiﾃｧﾃｵes, consulte a Documentaﾃｧﾃ｣o do Mﾃｳdulo Tarefa.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="250px"/> | <div align="left"> **ATENﾃﾃグ:** *Depois de criar o Relacionamento entre Classes, todas as Consultas dos Mﾃｳdulos Tarefa e Categoria trarﾃ｣o os Objetos associados, ou seja, Cada Objeto da Classe Tarefa trarﾃ｡ o Objeto Categoria associado e cada Objeto da Classe Categoria trarﾃ｡ a lista de Objetos Tarefa associados.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<h3>6.1. Criando a Pasta Categoria</h3>

Vamos criar dentro da **Collection Todo-List** a **Pasta Categoria**, que guardarﾃ｡ todas as requisiﾃｧﾃｵes do **Mﾃｳdulo Categoria**.

1. Na **Collection Todo-List**, clique no botﾃ｣o <img src="https://i.imgur.com/Igkx9ev.png" title="source: imgur.com" width="25px"/>. No menu que serﾃ｡ aberto, clique na opﾃｧﾃ｣o **New Folder**.

<div align="center"><img src="https://i.imgur.com/VIuco4q.png" title="source: imgur.com" width="50%"/></div>

2. Na janela que serﾃ｡ aberta, informe o nome da pasta (**Categoria**) e clique no botﾃ｣o **Create** para concluir. 

<div align="center"><img src="https://i.imgur.com/cFiJdKF.png" title="source: imgur.com" width="90%"/></div>

<h3>6.2. Criando a  Requisiﾃｧﾃ｣o - Consultar todas as Categorias</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/6mOsbDB.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**GET**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/mWPpKHD.png" title="source: imgur.com" /></div>

5. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/uuXq6lg.png" title="source: imgur.com" /></div>

<h3>6.3. Criando a  Requisiﾃｧﾃ｣o - Consultar Categoria por ID</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/OcB1oRz.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**GET**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/mWPpKHD.png" title="source: imgur.com" /></div>

5. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/899mLhW.png" title="source: imgur.com" /></div>

<h3>6.4. Criando a  Requisiﾃｧﾃ｣o - Consultar Categorias por Descriﾃｧﾃ｣o</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/K4jPoIL.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**GET**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/mWPpKHD.png" title="source: imgur.com" /></div>

5. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/esFTkkk.png" title="source: imgur.com" /></div>

<h3>6.5. Criando a  Requisiﾃｧﾃ｣o - Cadastrar Categoria</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/xhKfxhH.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**POST**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/TLBY2tJ.png" title="source: imgur.com" /></div>

5. No item **Body**, vamos alterar para **JSON**, como mostra a imagem abaixo. Desta forma poderemos enviar os dados do Objeto Categoria no Corpo da Requisiﾃｧﾃ｣o, no formato JSON.

<div align="center"><img src="https://i.imgur.com/PxOpzFd.png" title="source: imgur.com" /></div>

6. Observe que o item **Body** serﾃ｡ renomeado para **JSON**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/8hDNIbh.png" title="source: imgur.com" /></div>

7. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/aF4WAld.png" title="source: imgur.com" /></div>

8. Observe que na requisiﾃｧﾃ｣o do tipo POST o Corpo da requisiﾃｧﾃ｣o (Request Body), deve ser preenchido com um JSON contendo os dados da categoria que vocﾃｪ deseja persistir no Banco de dados, exceto o **id** que serﾃ｡ gerado pelo Banco de dados.

<h3>6.6. Criando a  Requisiﾃｧﾃ｣o - Atualizar Categoria</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/4AjsB23.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**PUT**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/z6dWHYj.png" title="source: imgur.com" /></div>

5. No item **Body**, vamos alterar para **JSON**, como mostra a imagem abaixo. Desta forma poderemos enviar os dados do Objeto Categoria no Corpo da Requisiﾃｧﾃ｣o, no formato JSON.

<div align="center"><img src="https://i.imgur.com/PxOpzFd.png" title="source: imgur.com" /></div>

6. Observe que o item **Body** serﾃ｡ renomeado para **JSON**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/8hDNIbh.png" title="source: imgur.com" /></div>

7. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/TuxoCs1.png" title="source: imgur.com" /></div>

8.  Observe que na requisiﾃｧﾃ｣o do tipo PUT o Corpo da requisiﾃｧﾃ｣o (Request Body), deve ser preenchido com um JSON contendo os dados da categoria que vocﾃｪ deseja persistir no Banco de dados, inclusive o **id** que serﾃ｡ utilizado para localizar o categoria no Banco de dados.

<h3>6.7. Criando a  Requisiﾃｧﾃ｣o - Deletar Categoria</h3>

1. Clique com o botﾃ｣o direito do mouse sobre a **Pasta Categoria** para abrir o menu e clique na opﾃｧﾃ｣o **New Request**.

<div align="center"><img src="https://i.imgur.com/LD63joX.png" title="source: imgur.com" width="40%"/></div>

2. Serﾃ｡ criada uma nova Requisiﾃｧﾃ｣o (New Request) dentro da pasta **Categoria**.

3. Dﾃｪ um duplo clique sobre a nova requisiﾃｧﾃ｣o (**New Request**), informe o nome da requisiﾃｧﾃ｣o (indicado na imagem abaixo na cor amarela) e pressione a tecla **enter** do seu teclado.

<div align="center"><img src="https://i.imgur.com/voQSzQ4.png" title="source: imgur.com" /></div>

4. Selecione o Mﾃｩtodo HTTP que serﾃ｡ utilizado (**DELETE**) na requisiﾃｧﾃ｣o, indicado na imagem abaixo na cor verde. 

<div align="center"><img src="https://i.imgur.com/qvMhoEx.png" title="source: imgur.com" /></div>

5. Configure o endereﾃｧo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/Cg0pseO.png" title="source: imgur.com" /></div>

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="100px"/> | **ATENﾃﾃグ:** *Ao Deletar um Objeto da Classe Categoria, todos os Objetos da Classe Categoria associados serﾃ｣o Deletados.* |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<h2>促 Passo 07 - Atualizar as Requisiﾃｧﾃｵes Cadastrar e Atualizar Tarefa no Insomnia</h2>

Como habilitamos o Relacionamento entre as Classes, para Cadastrarmos e Alterarmos as Postagens vamos precisar atender alguns requisitos:

- Os Categorias devem ser persistidos antes de criarmos as Postagens.
- Nas requisiﾃｧﾃｵes Cadastrar e Atualizar Tarefa, o JSON enviado no Corpo da Requisiﾃｧﾃ｣o deve conter um Objeto da Classe Categoria identificado apenas pelo **Atributo id**.

<h3>7.1. Atualizaﾃｧﾃ｣o - Requisiﾃｧﾃ｣o Cadastrar Tarefa</h3>

Vamos alterar o Corpo da requisiﾃｧﾃ｣o (Body), da Requisiﾃｧﾃ｣o Cadastrar Tarefa, do Recurso Tarefa.  
1. No Insominia, abra a pasta Tarefa e clique sobre a requisiﾃｧﾃ｣o Cadastrar Tarefa.

2. Altere o corpo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/xaUivXa.png" title="source: imgur.com" /></div>

No item marcado em amarelo na imagem acima, observe que estﾃ｡ sendo passado dentro do JSON um **Objeto da Classe Categoria** chamado **categoria**, identificado apenas pelo **Atributo id**.

A Resposta da Requisiﾃｧﾃ｣o serﾃ｡ semelhante a figura abaixo:

<div align="center"><img src="https://i.imgur.com/hhGAPAe.png" title="source: imgur.com" /></div>

Observe que a Categoria, cujo id ﾃｩ igual a 1, foi associada a nova Tarefa.

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="100px"/> | **ATENﾃﾃグ:** *O Objeto Categoria deve ser persistido no Banco de dados antes de ser inserido no JSON da requisiﾃｧﾃ｣o Cadastrar Tarefa.* |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<h3>7.2. Atualizaﾃｧﾃ｣o - Requisiﾃｧﾃ｣o Atualizar Tarefa</h3>

Vamos alterar o Corpo da requisiﾃｧﾃ｣o (Body), da Requisiﾃｧﾃ｣o Atualizar Tarefa, do Recurso Tarefa.  
1. No Insominia, abra a pasta Tarefa e clique sobre a requisiﾃｧﾃ｣o Atualizar Tarefa.

2. Altere o corpo da requisiﾃｧﾃ｣o conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/BMtQY4f.png" title="source: imgur.com" /></div>

No item marcado em amarelo na imagem acima, observe que estﾃ｡ sendo passado dentro do JSON um **Objeto da Classe Categoria** chamado **categoria**, identificado apenas pelo **Atributo id**.

A Resposta da Requisiﾃｧﾃ｣o serﾃ｡ semelhante a figura abaixo:

<div align="center"><img src="https://i.imgur.com/emuvOeW.png" title="source: imgur.com" /></div>

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="100px"/> | **ATENﾃﾃグ:** *O Objeto Categoria deve ser persistido no Banco de dados antes de ser inserido no JSON da requisiﾃｧﾃ｣o Atualizar Tarefa.* |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="35px"/> <a href="https://github.com/rafaelq80/backend_todolist_nest/tree/10_CRUD_Recurso_Categoria" target="_blank"><b>Cﾃｳdigo fonte do projeto</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>